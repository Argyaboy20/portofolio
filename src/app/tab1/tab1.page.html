<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <!-- Menu button for mobile view only -->
    <ion-buttons slot="start" class="menu-button mobile-only">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>

    <!-- Title for desktop view (left-aligned) -->
    <div class="desktop-title-container desktop-only">
      <a routerLink="/" class="blog-title">
        <span class="primary-text">Maulana Farras</span><span class="secondary-text"> Blog's</span>
      </a>
      <!-- "About Me" button for desktop view - positioned right after the title -->
      <ion-buttons slot="end" class="about-me-button">
        <ion-button (click)="navigateToAboutMe()">About Me</ion-button>
      </ion-buttons>
    </div>

    <!-- Title for mobile view (centered with slight right shift) -->
    <ion-title class="ion-text-center mobile-only">
      <a routerLink="/tabs/tab1" class="blog-title">
        <span class="primary-text">Maulana Farras</span><span class="secondary-text"> Blog's</span>
      </a>
    </ion-title>

    <ion-buttons slot="end" class="language-button">
      <ion-button (click)="toggleLanguage()">
        {{ currentLanguage === 'id' ? 'EN' : 'ID' }}
      </ion-button>
    </ion-buttons>

    <ion-buttons slot="end" class="biodata-button">
      <ion-button (click)="navigateToBiodata()">Biodata</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="split-screen" id="main-content">

  <ion-menu side="start" contentId="main-content" #mainMenu class="mobile-only" menuId="mainMenu">
    <ion-content>
      <ion-list style="background: #000000;">
        <ion-item button (click)="navigateToAboutMe($event)" detail="true">
          <ion-icon name="person-outline" slot="start"></ion-icon>
          <ion-label>About Me</ion-label>
        </ion-item>
        <ion-item button (click)="navigateToPrivacyPolicy($event)" detail="true">
          <ion-icon name="shield-outline" slot="start"></ion-icon>
          <ion-label>Privacy Policy</ion-label>
        </ion-item>
      </ion-list>
    </ion-content>
  </ion-menu>

  <!-- Pastikan main content memiliki ID yang sesuai -->
  <ion-router-outlet id="main-content" main></ion-router-outlet>

  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="chevron-down-circle-outline" pullingText="Tarik untuk refresh"
      refreshingSpinner="circles" refreshingText="Memuat...">
    </ion-refresher-content>
  </ion-refresher>

  <!-- Left Panel - Fixed Content -->
  <div class="left-panel" #leftPanel>

    <div class="bg-elements">
      <div class="bg-shape"></div>
      <div class="bg-shape"></div>
      <div class="bg-shape"></div>
      <div class="bg-shape"></div>
    </div>

    <div class="profile-container">
      <!-- Wrapper untuk foto + info (biar bisa sejajar pas scroll) -->
      <div class="profile-header">
        <div class="profile-image" (click)="openProfileImageModal()">
          <ion-img src="/assets/Foto1.jpg" alt="Foto Profil"></ion-img>
        </div>
        
        <div class="profile-info">
          <h1 class="name">Maulana Farras</h1>
          <p class="title">Programmer | Data Analyst</p>
        </div>

        <!-- Ini yang hilang pas scroll -->
        <p class="title1" (click)="navigateToITSupport()">IT Support Specialist</p>

        <p class="cv-link" (click)="openCV()">Lihat CV</p>
      </div>
      
      <div class="contact-info">
        <h3>Kontak Pribadi</h3>
        <div class="social-links">
          <a href="mailto:maulanafarras.jobs@gmail.com" target="_email">
            <ion-icon name="mail-outline"></ion-icon>
          </a>
          <a href="https://instagram.com/holla.arrr" target="_instagram">
            <ion-icon name="logo-instagram"></ion-icon>
          </a>
          <a href="https://linkedin.com/in/maulanafarras" target="_linkedin">
            <ion-icon name="logo-linkedin"></ion-icon>
          </a>
          <a href="https://github.com/Argyaboy20" target="_github">
            <ion-icon name="logo-github"></ion-icon>
          </a>
          <a href="https://discord.com/users/1050237808213774418" target="_discord">
            <ion-icon name="logo-discord"></ion-icon>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Right Panel - Scrollable Content -->
  <div class="right-panel" #rightPanel>
    <!-- TAMBAHKAN INI: Placeholder untuk nahan space -->
    <div class="left-panel-placeholder"></div>

    <div class="right-panel-3d-elements">
      <div class="bg-element-3d"></div>
      <div class="bg-element-3d"></div>
      <div class="bg-element-3d"></div>
      <div class="bg-element-3d"></div>
    </div>

    <!-- About Section -->
    <section id="about" class="section" #sectionElement>
      <h2 class="section-title">Profil Singkat</h2>
      <div class="section-content">
        <p>
          Seorang Software Engineer dengan fokus pada pengembangan aplikasi fullstack yang memiliki semangat tinggi
          dalam menciptakan solusi inovatif. Keahlian utama saya terletak pada penggunaan
          <span class="clickable-text" (click)="openExternalLink('https://ionicframework.com/')">
            <strong>Ionic Framework</strong>
          </span>
          yang dipadukan dengan Angular, React, Vue, Node.js dan TypeScript untuk mengembangkan aplikasi mobile
          cross-platform. Selain itu saya juga menggunakan Laravel untuk Backend. Dengan IPK 3.82 yang saya raih selama
          masa perkuliahan di
          <span class="clickable-text" (click)="openExternalLink('https://www.instagram.com/itb_indonesia')">
            <strong>Institut Teknologi dan Bisnis Indonesia</strong>
          </span>,
          saya membuktikan komitmen dan dedikasi yang kuat dalam bidang akademik.
        </p>
        <p>
          Kemampuan bahasa Inggris saya yang berada di level intermediate (EF SET: 67) memungkinkan saya untuk
          berkolaborasi secara efektif dalam tim
          internasional. Saya selalu antusias untuk mempelajari teknologi-teknologi baru dan menerapkannya dalam
          pengembangan aplikasi
          yang inovatif dan bermanfaat.
          <span class="clickable-text" (click)="navigateToBiodataContact()">
            <strong>Hubungi saya</strong>
          </span>
          jika anda tertarik untuk bekerja sama lebih lanjut dalam hal
          pengembangan perangkat lunak.
        </p>
      </div>
    </section>

    <!-- Education Section -->
    <section id="education" class="section" #sectionElement>
      <h2 class="section-title">Pendidikan</h2>
      <div class="section-content">
        <div class="education-timeline">
          <div class="education-item">
            <div class="education-icon">
              <ion-icon name="school-outline"></ion-icon>
            </div>
            <div class="education-details">

              <div class="right-panel-3d-elements">
                <div class="bg-element-3d"></div>
                <div class="bg-element-3d"></div>
                <div class="bg-element-3d"></div>
                <div class="bg-element-3d"></div>
              </div>

              <h3 class="school-name">Institut Teknologi dan Bisnis Indonesia</h3>
              <p class="degree">Rekayasa Perangkat Lunak</p>
              <p class="duration">2022 - 2026</p>
              <div class="education-stats">
                <div class="stat-item">
                  <span class="stat-label">IPK</span>
                  <span class="stat-value">3.82</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Semester</span>
                  <span class="stat-value">7</span>
                </div>
              </div>
              <div class="achievements">
                <div class="achievement-badge" (click)="openMerdekaProgramModal()">
                  <ion-icon name="trophy-outline"></ion-icon>
                  <span>Pertukaran Mahasiswa Merdeka Batch 4</span>
                </div>
                <!-- <div class="achievement-badge" (click)="openMSIBModal()">
                  <ion-icon name="ribbon-outline"></ion-icon>
                  <span>Magang Berdampak 2025</span>
                </div> -->
              </div>

              <!-- PMM4 Modal Section -->
              <ion-modal [isOpen]="isMerdekaProgramModalOpen" (didDismiss)="closeMerdekaProgramModal()"
                class="merdeka-program-modal">
                <ng-template>
                  <ion-header>
                    <ion-toolbar>
                      <ion-buttons slot="start">
                        <ion-button (click)="closeMerdekaProgramModal()">
                          <ion-icon name="close-outline"></ion-icon>
                        </ion-button>
                      </ion-buttons>
                      <ion-title>Pertukaran Mahasiswa Merdeka</ion-title>
                    </ion-toolbar>
                  </ion-header>
                  <ion-content class="modal-content">
                    <div class="merdeka-program-details">
                      <div class="education-timeline modal-education-item">
                        <div class="education-item">
                          <div class="education-icon">
                            <ion-icon name="school-outline"></ion-icon>
                          </div>
                          <div class="education-details">
                            <h3 class="school-name">Telkom University</h3>
                            <p class="degree">Rekayasa Perangkat Lunak</p>
                            <p class="duration">Feb - Jun 2024</p>
                            <div class="education-stats">
                              <div class="stat-item">
                                <span class="stat-label">Semester</span>
                                <span class="stat-value">4</span>
                              </div>
                              <div class="stat-item">
                                <span class="stat-label">IP</span>
                                <span class="stat-value">3.61</span>
                              </div>
                            </div>
                            <div class="modal-description">
                              <p>Program Pertukaran Mahasiswa Merdeka (Student Exchange) di Telkom University memberikan
                                kesempatan untuk mengembangkan keterampilan akademik dan pengalaman lintas kampus.</p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </ion-content>
                </ng-template>
              </ion-modal>

              <!-- MSIB Modal Section 
              <ion-modal [isOpen]="isMSIBModalOpen" (didDismiss)="closeMSIBModal()" class="msib-modal">
                <ng-template>
                  <ion-header>
                    <ion-toolbar>
                      <ion-buttons slot="start">
                        <ion-button (click)="closeMSIBModal()">
                          <ion-icon name="close-outline"></ion-icon>
                        </ion-button>
                      </ion-buttons>
                      <ion-title>Magang Berdampak</ion-title>
                    </ion-toolbar>
                  </ion-header>
                  <ion-content class="modal-content">
                    <div class="msib-program-details">
                      <div class="modal-education-item">
                        <div class="education-item">
                          <div class="education-icon">
                            <ion-icon name="school-outline"></ion-icon>
                          </div>
                          <div class="education-details">
                            <div class="processing-status">
                              <ion-icon name="hourglass-outline" class="hourglass-icon"></ion-icon>
                              <span class="processing-text">Sedang berproses</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </ion-content>
                </ng-template>
              </ion-modal> -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Skills Section -->
    <section id="skills" class="section" #sectionElement>
      <h2 class="section-title">Keahlian</h2>
      <div class="section-content">

        <div class="skill-bar">
          <div class="skill-name">Tailwind/CSS</div>
          <div class="skill-progress" data-progress="90%">
            <div class="progress-fill">
              <span>90%</span>
            </div>
          </div>
        </div>

        <div class="skill-bar">
          <div class="skill-name">JavaScript</div>
          <div class="skill-progress" data-progress="85%">
            <div class="progress-fill">
              <span>85%</span>
            </div>
          </div>
        </div>

        <div class="skill-bar">
          <div class="skill-name">Angular</div>
          <div class="skill-progress" data-progress="85%">
            <div class="progress-fill">
              <span>85%</span>
            </div>
          </div>
        </div>

        <div class="skill-bar">
          <div class="skill-name">Typescript</div>
          <div class="skill-progress" data-progress="85%">
            <div class="progress-fill">
              <span>85%</span>
            </div>
          </div>
        </div>

        <div class="skill-bar">
          <div class="skill-name">UI/UX Design</div>
          <div class="skill-progress" data-progress="90%">
            <div class="progress-fill">
              <span>90%</span>
            </div>
          </div>
        </div>


        <div class="skill-bar">
          <div class="skill-name">IT Support Specialist</div>
          <div class="skill-progress" data-progress="75%">
            <div class="progress-fill">
              <span>75%</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Tools section -->
    <section id="tools" class="section" #sectionElement>
      <div class="section-header">
        <h2 class="section-title">Alat dan Teknologi</h2>
        <div class="filter-buttons">
          <ion-button size="small" fill="clear" (click)="filterTools('all')" [class.active]="currentToolFilter === 'all'">
            {{ filterLabels.all }}
          </ion-button>
          <ion-button size="small" fill="clear" (click)="filterTools('programmer')" [class.active]="currentToolFilter === 'programmer'">
            {{ filterLabels.programmer }}
          </ion-button>
          <ion-button size="small" fill="clear" (click)="filterTools('data-analyst')" [class.active]="currentToolFilter === 'data-analyst'">
            {{ filterLabels.dataAnalyst }}
          </ion-button>
        </div>
      </div>
      <div class="section-content">
        <div class="tools-container">
          <ng-container *ngFor="let tool of tools">
            <div class="tool-item"
                [attr.data-category]="tool.category"
                *ngIf="currentToolFilter === 'all' || currentToolFilter === tool.category">
              <div class="tool-icon">
                <!-- Icon khusus untuk Adonis Js yang pakai img -->
                <img *ngIf="tool.name === 'Adonis Js'"
                    src="/assets/icon/adonis.png" alt="Adonis Js" class="custom-icon">
                <ion-icon *ngIf="tool.name !== 'Adonis Js'"
                          [name]="tool.icon"></ion-icon>
              </div>
              <span class="tool-name">{{ tool.name }}</span>
              <div class="tool-level">{{ tool.level }}</div>
            </div>
          </ng-container>
        </div>
      </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="section" #sectionElement>
      <div class="section-header">
        <h2 class="section-title">Project Terbaru</h2>
        <div class="sort-buttons">
          <ion-button size="small" fill="clear" (click)="sortProjects('newest')">
            <ion-icon name="arrow-down-outline" slot="start"></ion-icon>
            Terbaru
          </ion-button>
          <ion-button size="small" fill="clear" (click)="sortProjects('oldest')">
            <ion-icon name="arrow-up-outline" slot="start"></ion-icon>
            Terlama
          </ion-button>
        </div>
      </div>
      <div class="section-content">
        <div class="project-grid">

          <div class="project-card" *ngFor="let project of projects">
            <div class="project-image">
              <ion-img [src]="project.image" [alt]="project.title"></ion-img>
            </div>
            <div class="project-info">
              <h3>{{project.title}}</h3>
              <span class="project-duration">{{project.duration}}</span>
              <p>{{project.description}}</p>
              <div class="project-links">
                <a (click)="navigateWithAnimation(project.demoLink)" class="demo-link">Lihat Demo</a>
                <a (click)="confirmPassword(project.sourceLink)" class="source-link">Source Code</a>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- Career Section -->
    <section id="career" class="section" #sectionElement>
      <h2 class="section-title">Karir Kedua</h2>
      <div class="section-content">
        <div class="career-container">
          <div class="career-item" (click)="navigateWithAnimation('/admin')">
            <div class="career-icon">
              <ion-icon name="briefcase-outline"></ion-icon>
            </div>
            <div class="career-details">
              <h3>Staff Administrasi</h3>
              <p class="career-description">{{ currentLanguage === 'id' ? 'Klik untuk melihat detail lebih lanjut' :
                'Click to see more details' }}</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Volunteer Section -->
    <section id="volunteer" class="section" #sectionElement>
      <h2 class="section-title">{{ currentLanguage === 'id' ? 'Relawan' : 'Volunteer' }}</h2>
      <div class="section-content">
        <div class="volunteer-container">
          <div class="volunteer-item" (click)="navigateWithAnimation('/relawan')">
            <div class="volunteer-icon">
              <ion-icon name="people-outline"></ion-icon>
            </div>
            <div class="volunteer-details">
              <h3>{{ currentLanguage === 'id' ? 'Aktivitas Sosial' : 'Social Activities' }}</h3>
              <p class="volunteer-description">{{ currentLanguage === 'id' ? 'Klik untuk melihat keterlibatan dalam
                kegiatan sosial' : 'Click to see involvement in social activities' }}</p>
            </div>
            <div class="volunteer-badge">
              <ion-icon name="heart-outline"></ion-icon>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <p>Â© 2025 - Hak cipta dilindungi undang-undang</p>
    </footer>

    <!-- Powered by section -->
    <ion-footer class="right-panel-footer">
      <ion-toolbar>
        <ion-title class="powered-by-text">Powered by Hostinger and Github</ion-title>
      </ion-toolbar>
    </ion-footer>
  </div>

  <div class="flip-card-container" [class.visible]="isFlipCardVisible">
    <div class="flip-card" [class.flipped]="isCardFlipped">
      <div class="card-face front">
        <img src="/assets/foto.JPG" alt="Profile Photo">
        <h2>Maulana Farras</h2>
        <p>Software Engineer</p>
        <p>Web & Mobile Developer</p>
      </div>
      <div class="card-face back">
        <h2>Loading Biodata...</h2>
        <p>Please wait while prepare detailed biodata information</p>
        <ion-spinner name="crescent"></ion-spinner>
      </div>
    </div>
  </div>

</ion-content>

<!-- Profile Image Modal -->
<ion-modal [isOpen]="isProfileImageModalOpen" (didDismiss)="closeProfileImageModal()" class="profile-image-modal"
  [backdropDismiss]="true">
  <ng-template>
    <ion-content class="modal-content" (click)="closeProfileImageModal()">
      <div class="modal-image-container">
        <img src="/assets/Foto1.jpg" alt="Foto Profil" class="full-size-image"
          (contextmenu)="showDownloadRestrictionAlert()" (dragstart)="showDownloadRestrictionAlert()"
          (selectstart)="showDownloadRestrictionAlert()">
      </div>
    </ion-content>
  </ng-template>
</ion-modal>